version: 2

models:
  - name: dim_customers
    description: "Customer dimension table with complete customer profiles and behavioral metrics"
    columns:
      - name: customer_id
        description: "Unique identifier for each customer"
        tests:
          - unique
          - not_null
      - name: email
        description: "Customer email address"
        tests:
          - unique
          - not_null
      - name: full_name
        description: "Customer full name"
        tests:
          - not_null
      - name: total_orders
        description: "Total number of orders placed by customer"
        tests:
          - not_null
      - name: total_revenue_dollars
        description: "Total revenue generated by customer"
        tests:
          - not_null
      - name: customer_value_tier
        description: "Customer value segmentation"
        tests:
          - accepted_values:
              values: ['High Value', 'Medium Value', 'Low Value', 'No Value']
      - name: customer_segment
        description: "Customer frequency segmentation"
        tests:
          - accepted_values:
              values: ['One-time', 'Occasional', 'Frequent', 'Unknown']
      - name: customer_status
        description: "Customer activity status"
        tests:
          - accepted_values:
              values: ['Active', 'Dormant', 'Inactive']

  - name: dim_products
    description: "Product dimension table with product details and performance metrics"
    columns:
      - name: product_id
        description: "Unique identifier for each product"
        tests:
          - unique
          - not_null
      - name: product_name
        description: "Product name"
        tests:
          - not_null
      - name: category_clean
        description: "Standardized product category"
        tests:
          - accepted_values:
              values: ['Electronics', 'Footwear', 'Kitchen', 'Fitness', 'Home Office', 'Other']
      - name: price_dollars
        description: "Product price in dollars"
        tests:
          - not_null
      - name: performance_tier
        description: "Product performance classification"
        tests:
          - accepted_values:
              values: ['High Performer', 'Medium Performer', 'Low Performer', 'No Sales']

  - name: fct_orders
    description: "Orders fact table with order-level metrics and attributes"
    columns:
      - name: order_id
        description: "Unique identifier for each order"
        tests:
          - unique
          - not_null
      - name: customer_id
        description: "Foreign key to customer dimension"
        tests:
          - not_null
          - relationships:
              to: ref('dim_customers')
              field: customer_id
      - name: order_date
        description: "Date when order was placed"
        tests:
          - not_null
      - name: revenue_dollars
        description: "Revenue amount (0 if order not completed)"
        tests:
          - not_null
      - name: totals_match
        description: "Data quality check - order total matches sum of line items"
        tests:
          - not_null
      - name: basket_size_category
        description: "Categorization of order size"
        tests:
          - accepted_values:
              values: ['Large Basket', 'Medium Basket', 'Single Item', 'Empty Basket']

  - name: fct_order_items
    # Intentionally leaving some models undocumented to show mixed coverage
